import{L as B,b as v,o as q,w as x,k as I,d as C,P as l,O as n,R as e,V as d,S as o,Z as A,a1 as L,a2 as S,W as T}from"./framework.CpCYUOl9.js";const V={key:0,class:"quotation-carousel"},z={class:"quotation"},E={class:"quotation-en"},N={class:"quotation-zh"},X={class:"controls"},j=["disabled"],Q=["disabled"],U={class:"progress-bar-wrapper"},O={class:"progress-bar-bg"},G={key:1,class:"loading"},K={__name:"QuotationCarousel",props:{src:{type:String,default:"/quotations/xxx.json"},interval:{type:Number,default:4e3}},setup(m){const f=m,a=v([]),s=v(0);let _=null,u=null;const c=v(0),p=async()=>{try{const i=await fetch(f.src);a.value=await i.json()}catch{a.value=[]}},y=()=>{s.value=(s.value+1)%a.value.length,h()},b=()=>{s.value=(s.value-1+a.value.length)%a.value.length,h()},g=()=>{clearInterval(_),clearInterval(u),h(),a.value.length>1&&(_=setInterval(y,f.interval),u=setInterval($,30))};function h(){c.value=0}function $(){c.value+=30/f.interval,c.value>1&&(c.value=1)}q(async()=>{await p(),g()}),x(a,g);const w=I(()=>a.value[s.value]||{en:"",zh:""}),k=I(()=>Math.min(c.value*100,100));return x(s,h),C(()=>{clearInterval(_),clearInterval(u)}),(i,t)=>a.value.length?(n(),l("div",V,[e("div",z,[e("div",E,o(w.value.en),1),e("div",N,o(w.value.zh),1)]),e("div",X,[e("button",{onClick:b,disabled:a.value.length<=1},"â€¹",8,j),e("span",null,o(s.value+1)+" / "+o(a.value.length),1),e("button",{onClick:y,disabled:a.value.length<=1},"â€º",8,Q)]),d(" æ–°å¢è¿›åº¦æ¡ "),e("div",U,[e("div",O,[e("div",{class:"progress-bar-fg",style:A({width:k.value+"%"})},null,4)])])])):(n(),l("div",G,"Loading..."))}},Me=B(K,[["__scopeId","data-v-8e931c28"]]),W="/IMDB_Logo_2016.svg",Z={key:0,class:"movie-poster-info"},F={key:1,class:"movie-poster-info loading-area"},H={key:2,class:"movie-poster-info"},J={key:3,class:"movie-poster-info info-flex"},ee={class:"poster-area"},se=["src","alt"],te={key:0,class:"loader img-loader"},ae={key:1,class:"img-error"},oe={class:"info-area"},le={class:"movie-title"},ne={class:"movie-meta"},ie={key:0,class:"meta-item"},re={key:1,class:"meta-item rated"},ve=["title"],ce=["title"],ue={class:"movie-row"},de={class:"val"},_e={class:"movie-row"},pe={class:"val"},me={class:"movie-row"},fe={class:"val"},ge={class:"movie-row"},he={class:"val"},ye={class:"movie-row"},be={class:"val"},we={key:0,class:"plot-row"},ke={class:"val"},$e="5c2c9354",xe={__name:"fetchMovieInfo",props:{movie:{type:String,required:!0}},setup(m){const f=m,a=v(""),s=v({}),_=v(!1),u=v(!1),c=v(!0),p=v(!1),y=v(null),b=v(0),g=v(0),h=I(()=>`transform: perspective(600px) rotateX(${b.value}deg) rotateY(${g.value}deg);`);function $(i){const t=y.value;if(!t)return;const r=t.getBoundingClientRect(),D=i.clientX-r.left,Y=i.clientY-r.top,M=r.width/2,P=r.height/2,R=16;g.value=(D-M)/M*R,b.value=-((Y-P)/P)*R}function w(){b.value=0,g.value=0}async function k(i){if(i){_.value=!0,a.value="",s.value={},u.value=!1,c.value=!0,p.value=!1;try{const r=await(await fetch(`https://www.omdbapi.com/?apikey=${$e}&t=${encodeURIComponent(i)}`)).json();r.Response==="True"&&r.Poster&&r.Poster!=="N/A"?(a.value=r.Poster,s.value=r,c.value=!0,p.value=!1):u.value=!0}catch{u.value=!0}finally{_.value=!1}}}return q(()=>{k(f.movie)}),x(()=>f.movie,i=>{k(i)}),(i,t)=>m.movie?_.value?(n(),l("div",F,t[2]||(t[2]=[e("span",{class:"loader"},null,-1),e("span",{style:{"margin-left":"1em"}},"æµ·æŠ¥åŠ è½½ä¸­...",-1)]))):u.value?(n(),l("div",H,"æœªæ‰¾åˆ°ã€Š"+o(m.movie)+"ã€‹çš„æµ·æŠ¥",1)):(n(),l("div",J,[e("div",ee,[e("div",{class:"img-wrapper",ref_key:"posterBox",ref:y,onMousemove:$,onMouseleave:w,style:A(h.value)},[L(e("img",{src:a.value,alt:`Poster for ${m.movie}`,class:"poster-img",onLoad:t[0]||(t[0]=r=>c.value=!1),onError:t[1]||(t[1]=r=>p.value=!0)},null,40,se),[[S,!c.value&&!p.value]]),c.value?(n(),l("span",te)):d("v-if",!0),p.value?(n(),l("span",ae,"å›¾ç‰‡åŠ è½½å¤±è´¥")):d("v-if",!0)],36)]),e("div",oe,[e("div",le,o(s.value.Title),1),e("div",ne,[s.value.Year?(n(),l("span",ie,o(s.value.Year),1)):d("v-if",!0),s.value.Rated?(n(),l("span",re,o(s.value.Rated),1)):d("v-if",!0),s.value.imdbRating?(n(),l("span",{key:2,class:"meta-item rating",title:`IMDbè¯„åˆ†ï¼ˆ${s.value.imdbVotes}äººè¯„ä»·ï¼‰`},[t[3]||(t[3]=e("img",{src:W,alt:"IMDb",class:"imdb-logo",style:{height:"1.2em","vertical-align":"-0.2em",display:"inline"}},null,-1)),T(" Â "+o(s.value.imdbRating),1)],8,ve)):d("v-if",!0),s.value.Awards?(n(),l("span",{key:3,class:"meta-item awards",title:s.value.Awards},"ğŸ† "+o(s.value.Awards.split(".")[0]),9,ce)):d("v-if",!0)]),e("div",ue,[t[4]||(t[4]=e("span",{class:"label"},"å¯¼æ¼”ï¼š",-1)),e("span",de,o(s.value.Director),1)]),e("div",_e,[t[5]||(t[5]=e("span",{class:"label"},"ä¸»æ¼”ï¼š",-1)),e("span",pe,o(s.value.Actors),1)]),e("div",me,[t[6]||(t[6]=e("span",{class:"label"},"ç±»å‹ï¼š",-1)),e("span",fe,o(s.value.Genre),1)]),e("div",ge,[t[7]||(t[7]=e("span",{class:"label"},"ä¸Šæ˜ æ—¶é—´ï¼š",-1)),e("span",he,o(s.value.Released),1)]),e("div",ye,[t[8]||(t[8]=e("span",{class:"label"},"ç‰‡é•¿ï¼š",-1)),e("span",be,o(s.value.Runtime),1)]),s.value.Plot?(n(),l("div",we,[t[9]||(t[9]=e("span",{class:"label"},"ç®€ä»‹ï¼š",-1)),e("span",ke,o(s.value.Plot),1)])):d("v-if",!0)])])):(n(),l("div",Z,"è¯·æ­£ç¡®ä¼ å…¥ç”µå½±å"))}},Pe=B(xe,[["__scopeId","data-v-f77efebf"]]);export{Pe as _,Me as a};
